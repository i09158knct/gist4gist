(function(){var e=[].slice;define("markdown-gist-parser",["jquery","underscore","html-builder"],function(t,n,r){return{convertMarkdownToHtml:function(e){return r(e)},wrapEachSections:function(e){return'<div class="gist-head">'+e.replace(/(?=<h2)/g,'</div><div class="gist-section">')+"</div>"},convertHtmlToElement:function(e){return t.parseHTML('<div class="gist">'+e+"</div>")},getTargetId:function(e){var n;return n=t(e).find("h1").text().trim()},getHead:function(e){return{el:t(e).find(".gist-head")[0]}},findNameAndLineNumbers:/\s*(.+)\s*:\s*(\[.*\])\s*$/,extractTargetList:function(t){var n,r,i=this;return r=t.children,n=1<=r.length?e.call(r,0):[],n.map(function(e){var t,n,r,s,o;if(e.innerText!=null)s=e.innerText.match(i.findNameAndLineNumbers),r=s[0],t=s[1],n=s[2];else{if(e.textContent==null)throw new Error('Cannot use "innerText" and "textContent".');o=e.textContent.match(i.findNameAndLineNumbers),r=o[0],t=o[1],n=o[2]}return[t,JSON.parse(n)]})},getSections:function(e){var n,r=this;return n=t(e).find(".gist-section"),n.map(function(e,n){var i,s;return s=t(n).children()[1],i=s.tagName.toLowerCase()==="ul"?r.extractTargetList(s):[],{el:n,targetList:i}})},parse:function(e){var t;return t=this.convertHtmlToElement(this.wrapEachSections(this.convertMarkdownToHtml(e))),{gistId:this.getTargetId(t),head:this.getHead(t),sections:this.getSections(t)}}}})}).call(this);