(function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},n=[].slice;define("models/explanation",["jquery","underscore","backbone","markdown-gist-parser","gist-loader"],function(e,r,i,s,o){var u,a;return a=new o,u=function(r){function i(t,n){var r,o,u,a,f,l,c,h;i.__super__.constructor.apply(this,arguments),this.attributes=s.parse(t),this._thisGistId=n,o=this.attributes.head,l=e(o.el).find("h1"),l.remove(),a=this.attributes.sections;for(c=0,h=a.length;c<h;c++)u=a[c],f=i.buildHtmlTargetList(u.targetList),r=e(u.el).find("h2").eq(0).next(),r[0].tagName.toLowerCase()==="ul"&&r.replaceWith(f)}return t(i,r),i.prototype.getGistId=function(){return this._thisGistId},i.prototype.getTargetId=function(){return this.attributes.gistId},i.prototype.getHead=function(){return this.attributes.head},i.prototype.getSection=function(e){return e=+e||0,e!==0?this.attributes.sections[e-1]:this.getHead()},i.buildHtmlListItem=function(e,t){var n,r,i,s,o,u,a;return a=e.replace(/\./g,"-").trim(),r="gist-"+a,n='<button class="js-file-link btn btn-link" data-target="'+r+'">'+e+"</button>",u=function(e){return""+a+"-"+e},o=function(){var e,n,r;r=[];for(e=0,n=t.length;e<n;e++)s=t[e],r.push('<button class="js-line-link btn btn-small" data-target="'+u(s)+'">'+s+"</button>");return r}(),i="<li>"+n+" : "+o.join(" ")+"</li>"},i.buildHtmlTargetList=function(e){var t,n,r;return t=function(){var t,r,i;i=[];for(t=0,r=e.length;t<r;t++)n=e[t],i.push(this.buildHtmlListItem.apply(this,n));return i}.call(this),r='<ul class="target-list">'+t.join("")+"</ul>"},i.create=function(e,t){var n;t==null&&(t="explanation.md"),n=e.files[t];if(n==null)throw console.log(JSON.stringify(e,null,2)),new Error(""+t+" not found");if(n.language!=="Markdown")throw console.log(JSON.stringify(e,null,2)),new Error(""+t+" is not a Markdown file");return new i(n.content,e.id)},i.createAsync=function(e,t,r){return typeof t=="function"&&(r=t,t=null),a.load(e,function(e){var s;return s=i.create(e.data,t),typeof r=="function"?r.apply(null,[s].concat(n.call(arguments))):void 0})},i}(i.Model)})}).call(this);