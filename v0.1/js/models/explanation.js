(function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},n=[].slice;define("models/explanation",["jquery","underscore","backbone","markdown-gist-parser","gist-loader"],function(e,r,i,s,o){var u,a;return a=new o,u=function(r){function i(t,n){var r,o,u;i.__super__.constructor.apply(this,arguments),r=s.parse(t),function(){var t;return t=e(r.head.el).find("h1").first(),t.remove()}(),u=function(){var e,t,n,s;n=r.sections,s=[];for(e=0,t=n.length;e<t;e++)o=n[e],s.push(i.reconstructSection(o,!0));return s}(),this.attributes={targetId:r.gistId,thisGistId:n,head:r.head,sections:u}}return t(i,r),i.prototype.getGistId=function(){return this.attributes.thisGistId},i.prototype.getTargetId=function(){return this.attributes.targetId},i.prototype.getHead=function(){return this.attributes.head},i.prototype.getSection=function(e){return e=+e||0,e!==0?this.attributes.sections[e-1]:this.getHead()},i.reconstructSection=function(t,n){var r,i,s,o,u,a,f;return f=t.targetList,u=t.el,n==null&&(n=!1),n?i=e(u):i=e(u).clone(),r=i.find("h2").first(),s=r.next(),o=r.text(),r.remove(),s[0].tagName.toLowerCase()==="ul"&&s.remove(),a={caption:o,targetList:f,el:u}},i.create=function(e,t){var n;t==null&&(t="explanation.md"),n=e.files[t];if(n==null)throw console.log(JSON.stringify(e,null,2)),new Error(""+t+" not found");if(n.language!=="Markdown")throw console.log(JSON.stringify(e,null,2)),new Error(""+t+" is not a Markdown file");return new i(n.content,e.id)},i.createAsync=function(e,t,r){return typeof t=="function"&&(r=t,t=null),a.load(e,function(e){var s;return s=i.create(e.data,t),typeof r=="function"?r.apply(null,[s].concat(n.call(arguments))):void 0})},i}(i.Model)})}).call(this);